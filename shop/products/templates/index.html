{% extends "__base.html" %}

{% block title %}Home - Shop{% endblock %}

{% block content %}
<style>
/* –û–±—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä */
h1 {
    text-align: center;
    margin-bottom: 30px;
    color: #fff;
    font-weight: 700;
}

/* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö */
.new-orders {
    padding: 15px;
    background-color: #2a2a3d;
    border: 1px solid #444466;
    border-radius: 8px;
    margin-bottom: 20px;
    text-align: center;
    color: #f0e68c;
    font-weight: 600;
}
.new-orders a {
    font-weight: bold;
    text-decoration: underline;
    color: #6c63ff;
}
.new-orders a:hover {
    color: #fff;
}

/* –°–æ–æ–±—â–µ–Ω–∏—è */
.messages-list {
    list-style: none;
    padding: 0;
    margin-bottom: 20px;
}
.messages-list li {
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 8px;
    background-color: #33334d;
    color: #fff;
}

/* –§–æ—Ä–º–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ */
.filter-form {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 30px;
}
.filter-form input,
.filter-form select {
    padding: 10px;
    border-radius: 8px;
    border: 1px solid #444466;
    background-color: #1f1f2f;
    color: #e0e0e0;
    font-size: 14px;
}
.filter-form input::placeholder {
    color: #aaa;
}
.filter-form button {
    padding: 10px 15px;
    border-radius: 8px;
    border: none;
    background-color: #6c63ff;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.2s;
}
.filter-form button:hover {
    background-color: #5750d1;
    transform: translateY(-2px);
}

/* –°–µ—Ç–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ */
.products-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ */
.product-card {
    border: 1px solid #444466;
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    background-color: #1f1f2f;
    transition: transform 0.2s, box-shadow 0.2s;
}
.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.7);
}
.product-card h3 a {
    text-decoration: none;
    color: #fff;
    font-weight: 600;
    transition: color 0.3s;
}
.product-card h3 a:hover {
    color: #6c63ff;
}
.product-card p {
    font-weight: 600;
    color: #f0f0f0;
    margin-top: 5px;
}
</style>

<h1>Welcome to our Shop üõí</h1>

{% if new_orders %}
<div class="new-orders">
    ‚ö†Ô∏è You have new orders! 
    <a href="{% url 'products:seller_orders' %}">View orders</a>
</div>
{% endif %}

{% if messages %}
<ul class="messages-list">
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}

<form method="get" class="filter-form">
    <input type="text" name="title" placeholder="Search by title..." value="{{ request.GET.title }}">
    <select name="category">
        <option value="">All categories</option>
        {% for cat in categories %}
        <option value="{{ cat.id }}" {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
            {{ cat.name }}
        </option>
        {% endfor %}
    </select>
    <select name="sort_price">
        <option value="">Sort by price</option>
        <option value="asc" {% if request.GET.sort_price == "asc" %}selected{% endif %}>Low ‚Üí High</option>
        <option value="desc" {% if request.GET.sort_price == "desc" %}selected{% endif %}>High ‚Üí Low</option>
    </select>
    <button type="submit">Apply</button>
</form>

<div class="products-grid">
    {% for product in products %}
    <div class="product-card">
        <h3><a href="{% url 'products:product_detail' product.pk %}">{{ product.name }}</a></h3>
        <p>${{ product.price }}</p>
    </div>
    {% empty %}
    <p style="color:#aaa; grid-column: 1/-1; text-align: center;">No products found.</p>
    {% endfor %}
</div>
{% endblock %}
