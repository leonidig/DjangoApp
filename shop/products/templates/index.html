{% extends "__base.html" %}

{% block title %}Home - Shop{% endblock %}

{% block content %}
<h1>Welcome to our Shop ðŸ›’</h1>


<form method="get" style="margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
  <input type="text" name="title" placeholder="Search by title..."
         value="{{ request.GET.title }}" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">

  <select name="category" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
    <option value="">All categories</option>
    {% for cat in categories %}
      <option value="{{ cat.id }}" {% if request.GET.category == cat.id|stringformat:"s" %}selected{% endif %}>
        {{ cat.name }}
      </option>
    {% endfor %}
  </select>

  <select name="sort_price" style="padding: 5px; border-radius: 5px; border: 1px solid #ccc;">
    <option value="">Sort by price</option>
    <option value="asc" {% if request.GET.sort_price == "asc" %}selected{% endif %}>Low â†’ High</option>
    <option value="desc" {% if request.GET.sort_price == "desc" %}selected{% endif %}>High â†’ Low</option>
  </select>

  <button type="submit" style="padding: 5px 10px; border-radius: 5px; border: none; background: #333; color: #fff;">
    Apply
  </button>
</form>


<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
  {% for product in products %}
    <div style="border: 1px solid #ccc; border-radius: 10px; padding: 10px; text-align: center; background: #f9f9f9;">
      <h3>
        <a href="{% url 'products:product_detail' product.pk %}" style="text-decoration: none; color: #333;">
          {{ product.name }}
        </a>
      </h3>
      <p style="font-weight: bold;">${{ product.price }}</p>
    </div>
  {% empty %}
    <p>No products found.</p>
  {% endfor %}
</div>
{% endblock %}
